/*! For license information please see main.74a93e8f.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),a=n(43),l=n(950);function o(e){var t="https://05ec9a3d-a8ee-4de8-ad13-f8f4dfa912ec.preview.emergentagent.com","/api");const Lt=function(){const[e,t]=(0,a.useState)("home"),[n,r]=(0,a.useState)(!1),[l,o]=(0,a.useState)([]),[i,s]=(0,a.useState)([]),[u,d]=(0,a.useState)([]),[f,p]=(0,a.useState)(null),[m,h]=(0,a.useState)("2025-07-13"),[g,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[x,w]=(0,a.useState)(null),[k,S]=(0,a.useState)(null),[N,j]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=localStorage.getItem("ebd_token"),t=localStorage.getItem("ebd_user");e&&t&&(S(e),w(JSON.parse(t)),v(!0),C(),P(),T())}),[]);const E=async()=>{try{k&&await Rt.post("".concat(zt,"/logout?token=").concat(k))}catch(e){console.error("Erro no logout:",e)}S(null),w(null),v(!1),t("home"),localStorage.removeItem("ebd_token"),localStorage.removeItem("ebd_user")},_=()=>x?"admin"===x.tipo?l:l.filter((e=>x.turmas_permitidas.includes(e.id))):l;(0,a.useEffect)((()=>{C(),P(),T()}),[]);const C=async()=>{try{const e=await Rt.get("".concat(zt,"/turmas"));o(e.data)}catch(e){console.error("Erro ao carregar turmas:",e)}},P=async()=>{try{const e=await Rt.get("".concat(zt,"/students"));s(e.data)}catch(e){console.error("Erro ao carregar alunos:",e)}},T=async()=>{try{const e=await Rt.get("".concat(zt,"/reports/dashboard?data=").concat(m));d(e.data)}catch(e){console.error("Erro ao carregar dashboard:",e)}},O=e=>0===new Date(e+"T00:00:00").getDay(),R=()=>(0,At.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"bg-gradient-to-r from-indigo-900 via-blue-800 to-indigo-900 text-white px-6 py-8 shadow-2xl",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,At.jsx)("button",{onClick:()=>t("home"),className:"px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-all duration-200",children:"\u2190 In\xedcio"}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg p-1",children:(0,At.jsxs)("div",{className:"w-full h-full bg-gradient-to-b from-orange-400 via-yellow-500 to-green-500 rounded-full flex items-center justify-center relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500 to-red-600 rounded-full"}),(0,At.jsx)("div",{className:"relative z-10 text-white text-lg font-bold",children:"\ud83d\udee1\ufe0f"})]})}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h1",{className:"text-4xl font-bold tracking-wider",children:"App EBD"}),(0,At.jsxs)("div",{className:"mt-2 text-sm text-blue-200 space-y-1",children:[(0,At.jsxs)("p",{children:["Presidente: ",(0,At.jsx)("span",{className:"font-semibold",children:"Pr. Jos\xe9 Felipe da Silva"})]}),(0,At.jsxs)("p",{children:["Pastor Local: ",(0,At.jsx)("span",{className:"font-semibold",children:"Pr. Henrique Ferreira Neto"})]})]})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsxs)("div",{className:"text-sm text-blue-200",children:[(0,At.jsx)("p",{children:"Logado como:"}),(0,At.jsx)("p",{className:"font-semibold text-white",children:null===x||void 0===x?void 0:x.nome}),(0,At.jsxs)("p",{className:"text-xs",children:["(","admin"===(null===x||void 0===x?void 0:x.tipo)?"Administrador":"Professor",")"]})]}),(0,At.jsx)("button",{onClick:E,className:"mt-2 px-3 py-1 bg-red-500 bg-opacity-80 text-white rounded hover:bg-opacity-100 transition-all duration-200 text-sm",children:"Sair"})]})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("p",{className:"text-blue-200 text-lg",children:"Minist\xe9rio do Bel\xe9m \u2022 S\xe3o Paulo"}),(0,At.jsx)("p",{className:"text-blue-300 text-sm mt-1",children:"Sistema de Gerenciamento da Escola B\xedblica Dominical"}),(0,At.jsx)("p",{className:"text-blue-400 text-xs mt-2",children:"Desenvolvido por M\xe1rcio Ferreira"})]})]}),(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 border border-gray-200",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Relat\xf3rio do Dia"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Acompanhe a presen\xe7a e atividades"})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("div",{className:"relative",children:(0,At.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"px-4 py-3 border-2 border-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg"})}),(0,At.jsx)("button",{onClick:T,className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-blue-600 text-white rounded-lg hover:from-indigo-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-lg transition-all duration-200",children:"\ud83d\udd04 Atualizar"})]})]}),!O(m)&&(0,At.jsx)("div",{className:"bg-amber-50 border-l-4 border-amber-400 text-amber-800 px-4 py-3 rounded-r-lg mb-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\u26a0\ufe0f"}),(0,At.jsx)("strong",{children:"Aviso:"})," A data selecionada n\xe3o \xe9 um domingo."]})}),(0,At.jsx)("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:(0,At.jsxs)("table",{className:"w-full border-collapse bg-white",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:[(0,At.jsx)("th",{className:"px-6 py-4 text-left font-semibold",children:"Turma"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"Matriculados"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"Presentes"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"%"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"Ausentes"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"Visitantes"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"P\xf3s-Chamada"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"Ofertas"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"B\xedblias"}),(0,At.jsx)("th",{className:"px-4 py-4 text-center font-semibold",children:"Revistas"})]})}),(0,At.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[u.map(((e,t)=>(0,At.jsxs)("tr",{className:"hover:bg-indigo-50 transition-colors duration-150",children:[(0,At.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.turma_nome}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-gray-700",children:e.matriculados}),(0,At.jsx)("td",{className:"px-4 py-4 text-center",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.presentes})}),(0,At.jsx)("td",{className:"px-4 py-4 text-center",children:(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[e.matriculados>0?(e.presentes/e.matriculados*100).toFixed(1):"0.0","%"]})}),(0,At.jsx)("td",{className:"px-4 py-4 text-center",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:e.ausentes})}),(0,At.jsx)("td",{className:"px-4 py-4 text-center",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.visitantes})}),(0,At.jsx)("td",{className:"px-4 py-4 text-center",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:e.pos_chamada})}),(0,At.jsxs)("td",{className:"px-4 py-4 text-center font-semibold text-green-600",children:["R$ ",e.total_ofertas.toFixed(2)]}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-gray-700",children:e.total_biblias}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-gray-700",children:e.total_revistas})]},t))),u.length>0&&(0,At.jsxs)("tr",{className:"bg-gradient-to-r from-indigo-100 to-blue-100 font-bold text-indigo-900",children:[(0,At.jsx)("td",{className:"px-6 py-4 text-lg",children:"TOTAL GERAL"}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg",children:u.reduce(((e,t)=>e+t.matriculados),0)}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg text-green-700",children:u.reduce(((e,t)=>e+t.presentes),0)}),(0,At.jsxs)("td",{className:"px-4 py-4 text-center text-lg text-purple-700",children:[(()=>{const e=u.reduce(((e,t)=>e+t.matriculados),0),t=u.reduce(((e,t)=>e+t.presentes),0);return e>0?(t/e*100).toFixed(1):"0.0"})(),"%"]}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg text-red-700",children:u.reduce(((e,t)=>e+t.ausentes),0)}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg text-blue-700",children:u.reduce(((e,t)=>e+t.visitantes),0)}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg text-yellow-700",children:u.reduce(((e,t)=>e+t.pos_chamada),0)}),(0,At.jsxs)("td",{className:"px-4 py-4 text-center text-lg text-green-700",children:["R$ ",u.reduce(((e,t)=>e+t.total_ofertas),0).toFixed(2)]}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg",children:u.reduce(((e,t)=>e+t.total_biblias),0)}),(0,At.jsx)("td",{className:"px-4 py-4 text-center text-lg",children:u.reduce(((e,t)=>e+t.total_revistas),0)})]})]})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-2",children:"\u26a1"}),"A\xe7\xf5es R\xe1pidas"]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("button",{onClick:()=>t("chamada"),className:"w-full px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-lg transition-all duration-200 flex items-center justify-center text-lg font-semibold",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\u2705"}),"Fazer Chamada"]}),"admin"===(null===x||void 0===x?void 0:x.tipo)&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("button",{onClick:()=>t("relatorios"),className:"w-full px-6 py-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-lg transition-all duration-200 flex items-center justify-center text-lg font-semibold",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udcca"}),"Relat\xf3rios Detalhados"]}),(0,At.jsxs)("button",{onClick:()=>t("alunos"),className:"w-full px-6 py-4 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-lg transition-all duration-200 flex items-center justify-center text-lg font-semibold",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udc65"}),"Gerenciar Alunos"]}),(0,At.jsxs)("button",{onClick:()=>t("turmas"),className:"w-full px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-600 text-white rounded-lg hover:from-purple-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-purple-500 shadow-lg transition-all duration-200 flex items-center justify-center text-lg font-semibold",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83c\udfeb"}),"Gerenciar Turmas"]}),(0,At.jsxs)("button",{onClick:()=>t("usuarios"),className:"w-full px-6 py-4 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg hover:from-red-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-red-500 shadow-lg transition-all duration-200 flex items-center justify-center text-lg font-semibold",children:[(0,At.jsx)("span",{className:"text-xl mr-2",children:"\ud83d\udd10"}),"Gerenciar Usu\xe1rios"]})]}),"professor"===(null===x||void 0===x?void 0:x.tipo)&&(0,At.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,At.jsx)("p",{className:"text-sm text-blue-700",children:(0,At.jsx)("strong",{children:"Suas turmas:"})}),(0,At.jsx)("div",{className:"mt-2 space-y-1",children:_().map((e=>(0,At.jsx)("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mr-1",children:e.nome},e.id)))})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udcc8"}),"Resumo Geral"]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[(0,At.jsx)("span",{className:"text-gray-700 font-medium",children:"Total de Turmas:"}),(0,At.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:l.length})]}),(0,At.jsxs)("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[(0,At.jsx)("span",{className:"text-gray-700 font-medium",children:"Total de Alunos:"}),(0,At.jsx)("span",{className:"text-2xl font-bold text-green-600",children:i.length})]}),(0,At.jsxs)("div",{className:"flex justify-between items-center p-3 bg-emerald-50 rounded-lg",children:[(0,At.jsx)("span",{className:"text-gray-700 font-medium",children:"Presentes Hoje:"}),(0,At.jsx)("span",{className:"text-2xl font-bold text-emerald-600",children:u.reduce(((e,t)=>e+t.presentes),0)})]}),(0,At.jsxs)("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg",children:[(0,At.jsx)("span",{className:"text-gray-700 font-medium",children:"Ofertas Hoje:"}),(0,At.jsxs)("span",{className:"text-xl font-bold text-yellow-600",children:["R$ ",u.reduce(((e,t)=>e+t.total_ofertas),0).toFixed(2)]})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,At.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udca1"}),"Dicas de Uso"]}),(0,At.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),(0,At.jsx)("p",{children:"A chamada s\xf3 pode ser feita aos domingos"})]}),(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),(0,At.jsx)("p",{children:"Use a tela de chamada para registrar presen\xe7a e ofertas"})]}),(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),(0,At.jsx)("p",{children:"O relat\xf3rio \xe9 atualizado automaticamente ap\xf3s salvar"})]}),(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-500 mr-2",children:"\u2713"}),(0,At.jsx)("p",{children:"Use os relat\xf3rios detalhados para ver classes vencedoras"})]})]})]})]})]})]})}),A=()=>{const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)("");return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl",children:[(0,At.jsxs)("div",{className:"text-center mb-6",children:[(0,At.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-b from-orange-400 via-yellow-500 to-green-500 rounded-full flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-white text-2xl",children:"\ud83d\udee1\ufe0f"})}),(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Acesso ao Sistema"}),(0,At.jsx)("p",{className:"text-gray-600 mt-2",children:"App EBD - Minist\xe9rio do Bel\xe9m"})]}),(0,At.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),s("");const r=await(async(e,t)=>{try{const n=await Rt.post("".concat(zt,"/login"),{email:e,senha:t}),{user_id:r,nome:a,email:l,tipo:o,turmas_permitidas:i,token:s}=n.data,u={user_id:r,nome:a,email:l,tipo:o,turmas_permitidas:i};return S(s),w(u),v(!0),j(!1),localStorage.setItem("ebd_token",s),localStorage.setItem("ebd_user",JSON.stringify(u)),await C(),await P(),await T(),{success:!0}}catch(a){var n,r;return console.error("Erro no login:",a),{success:!1,message:(null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Erro ao fazer login"}}})(e,n);r.success||s(r.message),o(!1)},children:[(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,At.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"seu@email.com",required:!0})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,At.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]}),i&&(0,At.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:i}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-3 bg-gradient-to-r from-indigo-500 to-blue-600 text-white rounded-lg hover:from-indigo-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-gray-400 font-semibold",children:l?"Entrando...":"Entrar"}),(0,At.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"})]})]}),(0,At.jsx)("div",{className:"mt-6 text-center text-sm text-gray-600",children:(0,At.jsx)("p",{children:"Precisa de acesso? Fale com o administrador"})})]})})},z=()=>(0,At.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 flex items-center justify-center relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),(0,At.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%)"}}),(0,At.jsxs)("div",{className:"relative z-10 text-center text-white max-w-4xl mx-auto px-6",children:[(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-white rounded-full p-2 shadow-2xl",children:(0,At.jsxs)("div",{className:"w-full h-full bg-gradient-to-b from-orange-400 via-yellow-500 to-green-500 rounded-full flex items-center justify-center relative overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500 to-red-600 rounded-full"}),(0,At.jsx)("div",{className:"relative z-10 text-white text-3xl font-bold",children:"\ud83d\udee1\ufe0f"})]})}),(0,At.jsx)("h1",{className:"text-6xl font-bold mb-4 tracking-wider",children:"App EBD"}),(0,At.jsxs)("div",{className:"text-xl text-blue-200 mb-2",children:[(0,At.jsxs)("p",{children:["Presidente: ",(0,At.jsx)("span",{className:"font-semibold text-white",children:"Pr. Jos\xe9 Felipe da Silva"})]}),(0,At.jsxs)("p",{children:["Pastor Local: ",(0,At.jsx)("span",{className:"font-semibold text-white",children:"Pr. Henrique Ferreira Neto"})]})]}),(0,At.jsxs)("div",{className:"text-lg text-blue-300 mt-4",children:[(0,At.jsx)("p",{className:"font-semibold",children:"Minist\xe9rio do Bel\xe9m \u2022 S\xe3o Paulo"}),(0,At.jsx)("p",{className:"text-base mt-1",children:"Sistema de Gerenciamento da Escola B\xedblica Dominical"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,At.jsxs)("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[(0,At.jsx)("div",{className:"text-3xl mb-3",children:"\u2705"}),(0,At.jsx)("h3",{className:"font-semibold mb-2",children:"Chamada Digital"}),(0,At.jsx)("p",{className:"text-sm text-blue-200",children:"Controle de presen\xe7a r\xe1pido e eficiente"})]}),(0,At.jsxs)("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[(0,At.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udcca"}),(0,At.jsx)("h3",{className:"font-semibold mb-2",children:"Relat\xf3rios"}),(0,At.jsx)("p",{className:"text-sm text-blue-200",children:"Classes vencedoras e estat\xedsticas completas"})]}),(0,At.jsxs)("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[(0,At.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udc65"}),(0,At.jsx)("h3",{className:"font-semibold mb-2",children:"Gest\xe3o de Alunos"}),(0,At.jsx)("p",{className:"text-sm text-blue-200",children:"Cadastro e transfer\xeancia entre turmas"})]}),(0,At.jsxs)("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6 border border-white border-opacity-20",children:[(0,At.jsx)("div",{className:"text-3xl mb-3",children:"\ud83d\udcb0"}),(0,At.jsx)("h3",{className:"font-semibold mb-2",children:"Controle de Ofertas"}),(0,At.jsx)("p",{className:"text-sm text-blue-200",children:"Registro de ofertas e materiais distribu\xeddos"})]})]}),(0,At.jsxs)("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-2xl p-8 mb-12 border border-white border-opacity-20",children:[(0,At.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Estat\xedsticas Atuais para Relat\xf3rio Semanal"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-4xl font-bold text-yellow-400",children:l.length}),(0,At.jsx)("div",{className:"text-blue-200",children:"Turmas"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-4xl font-bold text-green-400",children:i.length}),(0,At.jsx)("div",{className:"text-blue-200",children:"Alunos"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-4xl font-bold text-blue-400",children:u.reduce(((e,t)=>e+t.presentes),0)}),(0,At.jsx)("div",{className:"text-blue-200",children:"Presentes"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"text-4xl font-bold text-purple-400",children:["R$ ",u.reduce(((e,t)=>e+t.total_ofertas),0).toFixed(0)]}),(0,At.jsx)("div",{className:"text-blue-200",children:"Ofertas Hoje"})]})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[y?(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("button",{onClick:()=>t("dashboard"),className:"px-12 py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 text-gray-900 rounded-full text-xl font-bold hover:from-yellow-400 hover:to-yellow-500 transform hover:scale-105 transition-all duration-300 shadow-2xl",children:"\ud83d\ude80 Acessar Sistema"}),(0,At.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-blue-200",children:[(0,At.jsxs)("span",{children:["Logado como: ",(0,At.jsx)("strong",{children:null===x||void 0===x?void 0:x.nome})]}),(0,At.jsx)("button",{onClick:E,className:"text-yellow-400 hover:text-yellow-300 underline",children:"Sair"})]})]}):(0,At.jsx)("button",{onClick:()=>j(!0),className:"px-12 py-4 bg-gradient-to-r from-indigo-500 to-blue-600 text-white rounded-full text-xl font-bold hover:from-indigo-400 hover:to-blue-500 transform hover:scale-105 transition-all duration-300 shadow-2xl",children:"\ud83d\udd10 Fazer Login"}),(0,At.jsx)("p",{className:"text-blue-300 text-sm mt-4",children:"Sistema desenvolvido por M\xe1rcio Ferreira"})]})]})]}),L=()=>{var e,n,r,a,l,o;const i=(()=>{if(!u||0===u.length)return{};const e=u.map((e=>c(c({},e),{},{porcentagem_frequencia_decimal:e.matriculados>0?e.presentes/e.matriculados:0}))),t={Infantil:{start:0,end:Math.min(4,e.length-1)},"Jovens e Adolescentes":{start:Math.min(4,e.length),end:Math.min(6,e.length-1)},Adulto:{start:Math.min(6,e.length),end:e.length-1}},n={};return Object.keys(t).forEach((r=>{const a=t[r];if(a.start<=a.end&&a.start<e.length){const t=e.slice(a.start,a.end+1);if(t.length>0){const e=Math.max(...t.map((e=>e.porcentagem_frequencia_decimal))),a=t.find((t=>t.porcentagem_frequencia_decimal===e)),l=Math.max(...t.map((e=>e.total_ofertas))),o=t.find((e=>e.total_ofertas===l));n[r]={frequencia:{turma_nome:a.turma_nome,porcentagem:Math.round(100*e*100)/100},oferta:{turma_nome:o.turma_nome,valor:Math.round(100*l)/100}}}}})),n})(),s=e=>isNaN(e)?"0,00":e.toFixed(2).replace(".",","),d=e=>isNaN(e)?"0,00":e.toFixed(2).replace(".",",");return(0,At.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("button",{onClick:()=>t("dashboard"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"\u2190 Voltar ao Dashboard"}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Relat\xf3rios Detalhados"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Relat\xf3rio consolidado e classes vencedoras por departamento"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Relat\xf3rio do Dia"}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,At.jsx)("button",{onClick:T,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Atualizar"})]})]}),!O(m)&&(0,At.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4",children:[(0,At.jsx)("strong",{children:"Aviso:"})," A data selecionada n\xe3o \xe9 um domingo."]}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-100",children:[(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Turma"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Matriculados"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Presentes"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"%"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Ausentes"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Visitantes"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"P\xf3s-Chamada"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Ofertas"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"B\xedblias"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Revistas"})]})}),(0,At.jsxs)("tbody",{children:[u.map(((e,t)=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:e.turma_nome}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.matriculados}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.presentes}),(0,At.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center font-semibold text-purple-600",children:[e.matriculados>0?(e.presentes/e.matriculados*100).toFixed(1):"0.0","%"]}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.ausentes}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.visitantes}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.pos_chamada}),(0,At.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:["R$ ",e.total_ofertas.toFixed(2)]}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.total_biblias}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.total_revistas})]},t))),u.length>0&&(0,At.jsxs)("tr",{className:"bg-blue-50 font-semibold",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"TOTAL GERAL"}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.matriculados),0)}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.presentes),0)}),(0,At.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center font-semibold text-purple-600",children:[(()=>{const e=u.reduce(((e,t)=>e+t.matriculados),0),t=u.reduce(((e,t)=>e+t.presentes),0);return e>0?(t/e*100).toFixed(1):"0.0"})(),"%"]}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.ausentes),0)}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.visitantes),0)}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.pos_chamada),0)}),(0,At.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:["R$ ",u.reduce(((e,t)=>e+t.total_ofertas),0).toFixed(2)]}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.total_biblias),0)}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:u.reduce(((e,t)=>e+t.total_revistas),0)})]})]})]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Classes Vencedoras por Departamento"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-green-700 border-b-2 border-green-200 pb-2",children:"Departamento Infantil"}),(0,At.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"Classe Vencedora em Frequ\xeancia do departamento Infantil"}),(0,At.jsx)("p",{className:"text-green-700",children:null!==(e=i.Infantil)&&void 0!==e&&e.frequencia?(0,At.jsxs)(At.Fragment,{children:["Nome: ",(0,At.jsx)("span",{className:"font-semibold",children:i.Infantil.frequencia.turma_nome})," \u2013 Porcentagem: ",(0,At.jsxs)("span",{className:"font-semibold",children:[s(i.Infantil.frequencia.porcentagem),"%"]})]}):"Nenhuma turma encontrada para este departamento"})]}),(0,At.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"Classe Vencedora em Oferta do departamento Infantil"}),(0,At.jsx)("p",{className:"text-green-700",children:null!==(n=i.Infantil)&&void 0!==n&&n.oferta?(0,At.jsxs)(At.Fragment,{children:["Nome: ",(0,At.jsx)("span",{className:"font-semibold",children:i.Infantil.oferta.turma_nome})," \u2013 M\xe1ximo: ",(0,At.jsxs)("span",{className:"font-semibold",children:["R$ ",d(i.Infantil.oferta.valor)]})]}):"Nenhuma turma encontrada para este departamento"})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-blue-700 border-b-2 border-blue-200 pb-2",children:"Departamento Jovens e Adolescentes"}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Classe Vencedora em Frequ\xeancia do departamento Jovens e Adolescentes"}),(0,At.jsx)("p",{className:"text-blue-700",children:null!==(r=i["Jovens e Adolescentes"])&&void 0!==r&&r.frequencia?(0,At.jsxs)(At.Fragment,{children:["Nome: ",(0,At.jsx)("span",{className:"font-semibold",children:i["Jovens e Adolescentes"].frequencia.turma_nome})," \u2013 Porcentagem: ",(0,At.jsxs)("span",{className:"font-semibold",children:[s(i["Jovens e Adolescentes"].frequencia.porcentagem),"%"]})]}):"Nenhuma turma encontrada para este departamento"})]}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Classe Vencedora em Oferta do departamento Jovens e Adolescentes"}),(0,At.jsx)("p",{className:"text-blue-700",children:null!==(a=i["Jovens e Adolescentes"])&&void 0!==a&&a.oferta?(0,At.jsxs)(At.Fragment,{children:["Nome: ",(0,At.jsx)("span",{className:"font-semibold",children:i["Jovens e Adolescentes"].oferta.turma_nome})," \u2013 M\xe1ximo: ",(0,At.jsxs)("span",{className:"font-semibold",children:["R$ ",d(i["Jovens e Adolescentes"].oferta.valor)]})]}):"Nenhuma turma encontrada para este departamento"})]})]}),(0,At.jsxs)("div",{className:"space-y-4 md:col-span-2",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-purple-700 border-b-2 border-purple-200 pb-2",children:"Departamento Adulto"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-purple-800 mb-2",children:"Classe Vencedora em Frequ\xeancia do departamento Adulto"}),(0,At.jsx)("p",{className:"text-purple-700",children:null!==(l=i.Adulto)&&void 0!==l&&l.frequencia?(0,At.jsxs)(At.Fragment,{children:["Nome: ",(0,At.jsx)("span",{className:"font-semibold",children:i.Adulto.frequencia.turma_nome})," \u2013 Porcentagem: ",(0,At.jsxs)("span",{className:"font-semibold",children:[s(i.Adulto.frequencia.porcentagem),"%"]})]}):"Nenhuma turma encontrada para este departamento"})]}),(0,At.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"font-semibold text-purple-800 mb-2",children:"Classe Vencedora em Oferta do departamento Adulto"}),(0,At.jsx)("p",{className:"text-purple-700",children:null!==(o=i.Adulto)&&void 0!==o&&o.oferta?(0,At.jsxs)(At.Fragment,{children:["Nome: ",(0,At.jsx)("span",{className:"font-semibold",children:i.Adulto.oferta.turma_nome})," \u2013 M\xe1ximo: ",(0,At.jsxs)("span",{className:"font-semibold",children:["R$ ",d(i.Adulto.oferta.valor)]})]}):"Nenhuma turma encontrada para este departamento"})]})]})]})]}),(0,At.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Crit\xe9rios de Classifica\xe7\xe3o:"}),(0,At.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Frequ\xeancia:"})," Calculada como (Presentes \xf7 Matriculados) \xd7 100, arredondada com 2 casas decimais"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Oferta:"})," Baseada no valor total de ofertas da turma, arredondada com 2 casas decimais"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Departamentos:"})," Baseados na posi\xe7\xe3o das turmas (Infantil: primeiras, Jovens: intermedi\xe1rias, Adulto: \xfaltimas)"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"L\xf3gica Excel:"})," Equivalente a \xcdNDICE + CORRESP + M\xc1XIMO para encontrar vencedores"]})]})]})]})]})})},F=()=>{var e;const[n,r]=(0,a.useState)([]),[o,s]=(0,a.useState)({ofertas_total:"",biblias_total:"",revistas_total:"",visitantes_total:"",pos_chamada_total:""});(0,a.useEffect)((()=>{f&&u()}),[f,m]);const u=async()=>{if(f)try{const e=i.filter((e=>e.turma_id===f)),t=await(async(e,t)=>{try{return(await Rt.get("".concat(zt,"/attendance?turma_id=").concat(e,"&data=").concat(t))).data}catch(n){return console.error("Erro ao carregar presen\xe7a:",n),[]}})(f,m);let n=0,a=0,l=0,o=0,u=0;const c={};t.forEach((e=>{c[e.aluno_id]=e,n+=e.oferta||0,a+=e.biblias_entregues||0,l+=e.revistas_entregues||0,"visitante"===e.status&&o++,"pos_chamada"===e.status&&u++})),s({ofertas_total:n>0?n.toString():"",biblias_total:a>0?a.toString():"",revistas_total:l>0?l.toString():"",visitantes_total:o>0?o.toString():"",pos_chamada_total:u>0?u.toString():""});const d=e.map((e=>{var t;return{aluno_id:e.id,nome:e.nome_completo,presente:"presente"===(null===(t=c[e.id])||void 0===t?void 0:t.status)||!1}}));r(d)}catch(e){console.error("Erro ao carregar dados da turma:",e)}},d=(e,t)=>{s((n=>c(c({},n),{},{[e]:t})))};return(0,At.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("button",{onClick:()=>t("dashboard"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"\u2190 Voltar ao Dashboard"}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Fazer Chamada"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turma"}),(0,At.jsxs)("select",{value:f||"",onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Selecione uma turma"}),_().map((e=>(0,At.jsx)("option",{value:e.id,children:e.nome},e.id)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data"}),(0,At.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),!O(m)&&(0,At.jsxs)("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4",children:[(0,At.jsx)("strong",{children:"Aviso:"})," A data selecionada n\xe3o \xe9 um domingo."]}),f&&(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg mb-6",children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-blue-800 mb-4",children:"Dados da Turma"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Oferta Total (R$)"}),(0,At.jsx)("input",{type:"text",value:o.ofertas_total||"",onChange:e=>d("ofertas_total",e.target.value),className:"w-full px-4 py-3 text-lg border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"B\xedblias"}),(0,At.jsx)("input",{type:"text",value:o.biblias_total||"",onChange:e=>d("biblias_total",e.target.value),className:"w-full px-4 py-3 text-lg border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Revistas"}),(0,At.jsx)("input",{type:"text",value:o.revistas_total||"",onChange:e=>d("revistas_total",e.target.value),className:"w-full px-4 py-3 text-lg border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Visitantes"}),(0,At.jsx)("input",{type:"text",value:o.visitantes_total||"",onChange:e=>d("visitantes_total",e.target.value),className:"w-full px-4 py-3 text-lg border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"P\xf3s-Chamada"}),(0,At.jsx)("input",{type:"text",value:o.pos_chamada_total||"",onChange:e=>d("pos_chamada_total",e.target.value),className:"w-full px-4 py-3 text-lg border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden mb-6",children:[(0,At.jsxs)("div",{className:"bg-gray-100 px-6 py-4 border-b flex justify-between items-center",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:null===(e=l.find((e=>e.id===f)))||void 0===e?void 0:e.nome}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Clique nos nomes para marcar presen\xe7a"}),(0,At.jsxs)("div",{className:"flex space-x-6 mt-2 text-sm",children:[(0,At.jsxs)("span",{className:"text-green-700 font-medium",children:["Presentes: ",n.filter((e=>e.presente)).length]}),(0,At.jsxs)("span",{className:"text-red-700 font-medium",children:["Ausentes: ",n.filter((e=>!e.presente)).length]}),(0,At.jsxs)("span",{className:"text-blue-700 font-medium",children:["Frequ\xeancia: ",n.length>0?(n.filter((e=>e.presente)).length/n.length*100).toFixed(1):0,"%"]})]})]}),(0,At.jsx)("button",{onClick:async()=>{try{b(!0);const e=n.filter((e=>e.presente)).length,t=parseFloat(o.ofertas_total)||0,r=parseInt(o.biblias_total)||0,a=parseInt(o.revistas_total)||0,l=parseInt(o.visitantes_total)||0,i=parseInt(o.pos_chamada_total)||0,s=n.map(((n,o)=>{let s=n.presente?"presente":"ausente",u=0,c=0,d=0;return n.presente&&e>0&&(u=Math.round(t/e*100)/100),0===o&&(c=r,d=a),o<l?s="visitante":o<l+i&&(s="pos_chamada"),{aluno_id:n.aluno_id,status:s,oferta:u,biblias_entregues:c,revistas_entregues:d}}));await Rt.post("".concat(zt,"/attendance/bulk/").concat(f,"?data=").concat(m),s),await T(),alert("Chamada salva com sucesso!")}catch(r){var e,t;console.error("Erro ao salvar chamada:",r),null!==(e=r.response)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.detail?alert("Erro: ".concat(r.response.data.detail)):alert("Erro ao salvar chamada")}finally{b(!1)}},disabled:g,className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400 text-lg font-semibold",children:g?"Salvando...":"Salvar Chamada"})]}),(0,At.jsx)("div",{className:"p-6",children:(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.map(((e,t)=>(0,At.jsx)("button",{onClick:()=>{return t=e.aluno_id,void r((e=>e.map((e=>e.aluno_id===t?c(c({},e),{},{presente:!e.presente}):e))));var t},className:"p-4 rounded-lg text-left transition-all duration-200 ".concat(e.presente?"bg-green-100 border-2 border-green-500 text-green-800":"bg-gray-100 border-2 border-gray-300 text-gray-700 hover:bg-gray-200"),children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 ".concat(e.presente?"bg-green-500":"bg-gray-400")}),(0,At.jsx)("span",{className:"font-medium",children:e.nome})]})},t)))})})]}),(0,At.jsxs)("div",{className:"p-6 bg-green-50 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-lg font-semibold text-green-800 mb-3",children:"Resumo"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n.filter((e=>e.presente)).length}),(0,At.jsx)("div",{className:"text-sm text-green-700",children:"Presentes"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-red-600",children:n.filter((e=>!e.presente)).length}),(0,At.jsx)("div",{className:"text-sm text-red-700",children:"Ausentes"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.length}),(0,At.jsx)("div",{className:"text-sm text-blue-700",children:"Total"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[n.length>0?(n.filter((e=>e.presente)).length/n.length*100).toFixed(1):0,"%"]}),(0,At.jsx)("div",{className:"text-sm text-purple-700",children:"Frequ\xeancia"})]})]})]})]})]})]})})},D=()=>{const[e,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)(null),[s,u]=(0,a.useState)(!1),[d,f]=(0,a.useState)(null),[p,m]=(0,a.useState)({nome_completo:"",data_nascimento:"",contato:"",turma_id:""}),[h,g]=(0,a.useState)({nova_turma_id:""});return(0,At.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("button",{onClick:()=>t("dashboard"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"\u2190 Voltar ao Dashboard"}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Gerenciar Alunos"}),(0,At.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Novo Aluno"})]})]}),e&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:r?"Editar Aluno":"Novo Aluno"}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{r?await Rt.put("".concat(zt,"/students/").concat(r.id),p):await Rt.post("".concat(zt,"/students"),p),await P(),n(!1),o(null),m({nome_completo:"",data_nascimento:"",contato:"",turma_id:""}),alert("Aluno salvo com sucesso!")}catch(l){var t,a;console.error("Erro ao salvar aluno:",l),null!==(t=l.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.detail?alert("Erro: ".concat(l.response.data.detail)):alert("Erro ao salvar aluno")}},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo"}),(0,At.jsx)("input",{type:"text",value:p.nome_completo,onChange:e=>m(c(c({},p),{},{nome_completo:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento"}),(0,At.jsx)("input",{type:"date",value:p.data_nascimento,onChange:e=>m(c(c({},p),{},{data_nascimento:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contato"}),(0,At.jsx)("input",{type:"text",value:p.contato,onChange:e=>m(c(c({},p),{},{contato:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turma"}),(0,At.jsxs)("select",{value:p.turma_id,onChange:e=>m(c(c({},p),{},{turma_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,At.jsx)("option",{value:"",children:"Selecione uma turma"}),l.map((e=>(0,At.jsx)("option",{value:e.id,children:e.nome},e.id)))]})]}),(0,At.jsxs)("div",{className:"md:col-span-2 flex space-x-4",children:[(0,At.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500",children:r?"Atualizar":"Criar"}),(0,At.jsx)("button",{type:"button",onClick:()=>{n(!1),o(null),m({nome_completo:"",data_nascimento:"",contato:"",turma_id:""})},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"})]})]})]}),s&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Transferir Aluno: ",null===d||void 0===d?void 0:d.nome_completo]}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.post("".concat(zt,"/students/").concat(d.id,"/transfer"),h),await P(),u(!1),f(null),g({nova_turma_id:""}),alert("Aluno transferido com sucesso!")}catch(r){var t,n;console.error("Erro ao transferir aluno:",r),null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail?alert("Erro: ".concat(r.response.data.detail)):alert("Erro ao transferir aluno")}},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nova Turma"}),(0,At.jsxs)("select",{value:h.nova_turma_id,onChange:e=>g({nova_turma_id:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,At.jsx)("option",{value:"",children:"Selecione a nova turma"}),l.filter((e=>e.id!==(null===d||void 0===d?void 0:d.turma_id))).map((e=>(0,At.jsx)("option",{value:e.id,children:e.nome},e.id)))]})]}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500",children:"Transferir"}),(0,At.jsx)("button",{type:"button",onClick:()=>{u(!1),f(null),g({nova_turma_id:""})},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Lista de Alunos"}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-100",children:[(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Nome"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Data Nascimento"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Contato"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Turma"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"A\xe7\xf5es"})]})}),(0,At.jsx)("tbody",{children:i.map((e=>{var t;return(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.nome_completo}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.data_nascimento}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.contato}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(null===(t=l.find((t=>t.id===e.turma_id)))||void 0===t?void 0:t.nome)||"N/A"}),(0,At.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:[(0,At.jsx)("button",{onClick:()=>(e=>{o(e),m({nome_completo:e.nome_completo,data_nascimento:e.data_nascimento,contato:e.contato,turma_id:e.turma_id}),n(!0)})(e),className:"mr-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Editar"}),(0,At.jsx)("button",{onClick:()=>(e=>{f(e),g({nova_turma_id:""}),u(!0)})(e),className:"mr-2 px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600",children:"Transferir"}),(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja remover este aluno?"))try{await Rt.delete("".concat(zt,"/students/").concat(e)),await P(),alert("Aluno removido com sucesso!")}catch(r){var t,n;console.error("Erro ao remover aluno:",r),null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail?alert("Erro: ".concat(r.response.data.detail)):alert("Erro ao remover aluno")}})(e.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Remover"})]})]},e.id)}))})]})})]})]})})},M=()=>{const[e,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)(null),[s,u]=(0,a.useState)({nome:"",descricao:""});return(0,At.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("button",{onClick:()=>t("dashboard"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"\u2190 Voltar ao Dashboard"}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Gerenciar Turmas"}),(0,At.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Nova Turma"})]})]}),e&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:r?"Editar Turma":"Nova Turma"}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{r?await Rt.put("".concat(zt,"/turmas/").concat(r.id),s):await Rt.post("".concat(zt,"/turmas"),s),await C(),n(!1),o(null),u({nome:"",descricao:""}),alert("Turma salva com sucesso!")}catch(l){var t,a;console.error("Erro ao salvar turma:",l),null!==(t=l.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.detail?alert("Erro: ".concat(l.response.data.detail)):alert("Erro ao salvar turma")}},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),(0,At.jsx)("input",{type:"text",value:s.nome,onChange:e=>u(c(c({},s),{},{nome:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descri\xe7\xe3o"}),(0,At.jsx)("input",{type:"text",value:s.descricao,onChange:e=>u(c(c({},s),{},{descricao:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{className:"md:col-span-2 flex space-x-4",children:[(0,At.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500",children:r?"Atualizar":"Criar"}),(0,At.jsx)("button",{type:"button",onClick:()=>{n(!1),o(null),u({nome:"",descricao:""})},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Lista de Turmas"}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-100",children:[(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Nome"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Descri\xe7\xe3o"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Alunos"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"A\xe7\xf5es"})]})}),(0,At.jsx)("tbody",{children:l.map((e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:e.nome}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.descricao||"N/A"}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:i.filter((t=>t.turma_id===e.id)).length}),(0,At.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:[(0,At.jsx)("button",{onClick:()=>(e=>{o(e),u({nome:e.nome,descricao:e.descricao||""}),n(!0)})(e),className:"mr-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Editar"}),(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja remover esta turma?"))try{await Rt.delete("".concat(zt,"/turmas/").concat(e)),await C(),alert("Turma removida com sucesso!")}catch(r){var t,n;console.error("Erro ao remover turma:",r),null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail?alert("Erro: ".concat(r.response.data.detail)):alert("Erro ao remover turma")}})(e.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Remover"})]})]},e.id)))})]})})]})]})})},U=()=>{const[e,n]=(0,a.useState)([]),[r,o]=(0,a.useState)(!1),[i,s]=(0,a.useState)({nome:"",email:"",senha:"",tipo:"professor",turmas_permitidas:[]});(0,a.useEffect)((()=>{u()}),[]);const u=async()=>{try{const e=await Rt.get("".concat(zt,"/users"));n(e.data)}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}};return(0,At.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,At.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("button",{onClick:()=>t("dashboard"),className:"mb-4 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"\u2190 Voltar ao Dashboard"}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Gerenciar Usu\xe1rios"}),(0,At.jsx)("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Novo Usu\xe1rio"})]})]}),r&&(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Novo Usu\xe1rio"}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Rt.post("".concat(zt,"/users"),i),await u(),o(!1),s({nome:"",email:"",senha:"",tipo:"professor",turmas_permitidas:[]}),alert("Usu\xe1rio criado com sucesso!")}catch(r){var t,n;console.error("Erro ao criar usu\xe1rio:",r),null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail?alert("Erro: ".concat(r.response.data.detail)):alert("Erro ao criar usu\xe1rio")}},children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome"}),(0,At.jsx)("input",{type:"text",value:i.nome,onChange:e=>s(c(c({},i),{},{nome:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,At.jsx)("input",{type:"email",value:i.email,onChange:e=>s(c(c({},i),{},{email:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,At.jsx)("input",{type:"password",value:i.senha,onChange:e=>s(c(c({},i),{},{senha:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),(0,At.jsxs)("select",{value:i.tipo,onChange:e=>s(c(c({},i),{},{tipo:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"professor",children:"Professor"}),(0,At.jsx)("option",{value:"admin",children:"Administrador"})]})]})]}),"professor"===i.tipo&&(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turmas Permitidas"}),(0,At.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 p-4 border rounded-lg bg-gray-50",children:l.map((e=>(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",checked:i.turmas_permitidas.includes(e.id),onChange:()=>{return t=e.id,void s((e=>c(c({},e),{},{turmas_permitidas:e.turmas_permitidas.includes(t)?e.turmas_permitidas.filter((e=>e!==t)):[...e.turmas_permitidas,t]})));var t},className:"mr-2"}),(0,At.jsx)("span",{className:"text-sm",children:e.nome})]},e.id)))})]}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Criar Usu\xe1rio"}),(0,At.jsx)("button",{type:"button",onClick:()=>{o(!1),s({nome:"",email:"",senha:"",tipo:"professor",turmas_permitidas:[]})},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Lista de Usu\xe1rios"}),(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"w-full border-collapse border border-gray-200",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-100",children:[(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Nome"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Email"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Tipo"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Turmas"}),(0,At.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"A\xe7\xf5es"})]})}),(0,At.jsx)("tbody",{children:e.map((e=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.nome}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.email}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:(0,At.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("admin"===e.tipo?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:"admin"===e.tipo?"Administrador":"Professor"})}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:"admin"===e.tipo?(0,At.jsx)("span",{className:"text-green-600 font-semibold",children:"Todas"}):(0,At.jsxs)("span",{className:"text-sm",children:[e.turmas_permitidas.length," turma(s)"]})}),(0,At.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:"admin@ebd.com"!==e.email&&(0,At.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Tem certeza que deseja remover este usu\xe1rio?"))try{await Rt.delete("".concat(zt,"/users/").concat(e)),await u(),alert("Usu\xe1rio removido com sucesso!")}catch(t){console.error("Erro ao remover usu\xe1rio:",t),alert("Erro ao remover usu\xe1rio")}})(e.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Remover"})})]},e.id)))})]})})]})]})})};return(0,At.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(()=>{if(!y&&"home"!==e)return t("home"),(0,At.jsx)(z,{});switch(e){case"home":default:return(0,At.jsx)(z,{});case"dashboard":return y?(0,At.jsx)(R,{}):(0,At.jsx)(z,{});case"chamada":return y?(0,At.jsx)(F,{}):(0,At.jsx)(z,{});case"relatorios":return y&&"admin"===(null===x||void 0===x?void 0:x.tipo)?(0,At.jsx)(L,{}):(0,At.jsx)(R,{});case"alunos":return y&&"admin"===(null===x||void 0===x?void 0:x.tipo)?(0,At.jsx)(D,{}):(0,At.jsx)(R,{});case"turmas":return y&&"admin"===(null===x||void 0===x?void 0:x.tipo)?(0,At.jsx)(M,{}):(0,At.jsx)(R,{});case"usuarios":return y&&"admin"===(null===x||void 0===x?void 0:x.tipo)?(0,At.jsx)(U,{}):(0,At.jsx)(R,{})}})(),N&&(0,At.jsx)(A,{})]})};l.createRoot(document.getElementById("root")).render((0,At.jsx)(a.StrictMode,{children:(0,At.jsx)(Lt,{})}))})();
//# sourceMappingURL=main.74a93e8f.js.map